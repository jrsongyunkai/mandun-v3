webpackJsonp([10],{"3EEZ":function(e,t,a){"use strict";var n=a("P9l9"),o={props:{inspectionData:{type:Object},titleFlag:{type:Boolean}},components:{},data:function(){return{inspectionForm:{name:"",time:"",content:""},tableData:[],rules:{name:[{required:!0,message:this.$t("table.pleaseEnter")+this.$t("table.inspector"),trigger:"blur"}],time:[{required:!0,message:this.$t("table.pleaseEnter")+this.$t("main.date")+this.$t("dialog.time"),trigger:"blur"}],content:[{required:!0,message:this.$t("placeholder.content"),trigger:"blur"}]}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){var e=this;if(!this.titleFlag){var t={projectCode:this.inspectionData.projectCode,mac:this.inspectionData.macs};Object(n._41)(t).then(function(t){t.success?e.tableData=t.data:"-1"===t.code||e.$message({message:t.message,type:"error"})}).catch(function(t){t&&e.$message({message:e.$t("message.unknown"),type:"error"})})}},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a={projectCode:e.inspectionData.projectCode,macs:e.inspectionData.macs,content:e.inspectionForm.content,completeStaffName:e.inspectionForm.name,completeTime:e.inspectionForm.time};Object(n._42)(a).then(function(t){t.success?(e.$message({message:t.message,type:"success"}),e.$emit("handleInspectionClose")):"-1"===t.code||e.$message({message:t.message,type:"error"})}).catch(function(t){t&&e.$message({message:e.$t("message.unknown"),type:"error"})})})}},watch:{}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Inspction"}},[e.titleFlag?a("div",{staticClass:"inspction"},[a("el-form",{ref:"ruleForm",attrs:{"label-position":"left","label-width":"100px",rules:e.rules,size:"small",model:e.inspectionForm}},[a("el-form-item",{attrs:{prop:"time",required:"",label:e.$t("table.inspection")+e.$t("dialog.time")+"："}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:e.$t("placeholder.pleaseChoose")+e.$t("main.date")+e.$t("dialog.time")},model:{value:e.inspectionForm.time,callback:function(t){e.$set(e.inspectionForm,"time",t)},expression:"inspectionForm.time"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",required:"",label:e.$t("table.inspector")+"："}},[a("el-input",{model:{value:e.inspectionForm.name,callback:function(t){e.$set(e.inspectionForm,"name",t)},expression:"inspectionForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"content",required:"",label:e.$t("table.inspection")+e.$t("control.content")+"："}},[a("el-input",{attrs:{type:"textarea",rows:8},model:{value:e.inspectionForm.content,callback:function(t){e.$set(e.inspectionForm,"content",t)},expression:"inspectionForm.content"}})],1)],1)],1):a("div",{staticStyle:{height:"430px"}},[a("el-table",{directives:[{name:"el_scrollBar",rawName:"v-el_scrollBar:scrollBar",arg:"scrollBar"}],staticClass:"device-wrap mt-10",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"440px"}},[a("el-table-column",{attrs:{prop:"completeTime",label:e.$t("table.inspection")+e.$t("main.date"),width:"170",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"completeStaffName",label:e.$t("table.inspector"),width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:e.$t("table.inspection")+e.$t("control.content")}})],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(e){a("cDZ3")},"data-v-20bb80bf",null);t.a=s.exports},"9q6v":function(e,t){},cDZ3:function(e,t){},dZsd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IcnI"),o=a("3EEZ"),i=a("P9l9"),s={props:{queryType:{type:String}},data:function(){return{valueYear:"2022",valueMonth:"2022"+((new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1)),dateValue:!0,buttonColor:"success",yearColor:"info",exportRangeFlags:!1,stats:[{value:"0",label:this.$t("control.offline")},{value:"1",label:this.$t("table.online")},{value:"-1",label:this.$t("table.offLine")}],projectNames:[],devicesData:[],devicesTotal:0,currentPage:1,pageSize:20,formInline:{projectCode:this.$route.params.projectCode?this.$route.params.projectCode:this.$store.state.projectCode,status:"100"===this.$route.params.status?"":this.$route.params.status,mac:"",aliasName:"",addr:""},loading:!1,inspectionFlag:!1,titleFlag:!1,inspectionData:{projectCode:"",macs:""}}},mounted:function(){this.init()},methods:{init:function(){this.queryDevices()},queryDevices:function(){var e=this;this.$route.params.status&&"100"!==this.$route.params.status&&(this.formInline.status=this.$route.params.status.split(","),this.$route.params.status=""),this.devicesData=[],this.loading=!0;var t={projectCode:this.formInline.projectCode,mac:this.formInline.mac,macName:this.formInline.aliasName,address:this.formInline.addr,provinceId:this.$store.state.provinceId,cityId:this.$store.state.cityId,countyId:this.$store.state.countyId,onlineStats:this.formInline.status.toString(),pageNo:this.currentPage,pageSize:this.pageSize};Object(i._136)(t).then(function(t){t.success?(e.devicesData=t.datas,e.devicesTotal=t.total,e.projectNames=e.$store.state.allProjects.data,e.deviceFlag=!0):"-1"===t.code||e.$message({message:t.message,type:"error"})}).catch(function(t){t&&e.$message({message:e.$t("message.unknown"),type:"error"})}).finally(function(){e.loading=!1})},onSubmit:function(){this.currentPage=1,this.queryDevices()},handleCloseRange:function(){this.valueYear="",this.valueMonth=""},getMonthValue:function(){this.buttonColor="success",this.yearColor="info",this.dateValue=!0},getYearValue:function(){this.buttonColor="info",this.yearColor="success",this.dateValue=!1},handleExportRange:function(){console.log(this.valueYear+"01"),this.dateValue?this.$func.windowCountDown(ctxPaths+"/project/main/v5/xls/userBoxPowerStats.as?startYm="+this.valueMonth+"&endYm="+this.valueMonth):this.dateValue||this.$func.windowCountDown(ctxPaths+"/project/main/v5/xls/userBoxPowerStats.as?startYm="+this.valueYear+"01&endYm="+this.valueYear+"12")},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.queryDevices()},handleCurrentChange:function(e){this.currentPage=e,this.queryDevices()},handleCommand:function(e){"electric"===e?this.exportRangeFlags=!0:this.$func.windowCountDown(ctxPaths+"/project/main/v3/xls/exportProjectMacDetails.as?projectCode="+this.formInline.projectCode+"&provinceId="+(this.$store.state.provinceId?this.$store.state.provinceId:"")+"&cityId="+(this.$store.state.cityId?this.$store.state.cityId:"")+"&countyId="+(this.$store.state.countyId?this.$store.state.countyId:"")+"&mac="+this.formInline.mac+"&address="+this.formInline.addr+"&macName="+this.formInline.aliasName+"&pageSize="+this.pageSize+"&pageNo="+this.currentPage+"&onlineStats="+this.formInline.status+"&exportType="+("current"===e?"exportCurrent":""))},handleSwitch:function(e,t){var a=this,o={projectCode:e.projectCode};Object(i._195)(o).then(function(o){o.success?(n.a.commit("projectCode",e.projectCode),n.a.commit("fullName",e.projectName),n.a.commit("distributionDateType",1),"project"!==t?(n.a.commit("equipmentType",e.equipmentType),n.a.commit("overviewMac",e.mac)):(n.a.commit("equipmentType",1),n.a.commit("overviewMac","")),a.$router.push({path:"/InnerMain/Overview"})):"-1"===o.code||a.$message({message:o.message,type:"error"})}).catch(function(e){e&&a.$message({message:a.$t("message.unknown"),type:"error"})})},toChannelList:function(){this.$router.push({name:"ChannelList",query:{mac:this.formInline.mac,status:this.formInline.status,projectCode:this.formInline.projectCode}})},handleInspection:function(e){this.titleFlag=this.inspectionFlag=!0,this.inspectionData={projectCode:e.projectCode,macs:e.mac}},handleViewInspection:function(e){this.titleFlag=!1,this.inspectionFlag=!0,this.inspectionData={projectCode:e.projectCode,macs:e.mac}},submitInformation:function(){this.$refs.inspection.submitForm()},handleInspectionClose:function(){this.inspectionFlag=!1}},watch:{"$store.state.location":{handler:function(e,t){e&&this.queryDevices()},deep:!0}},components:{InspectionDevice:o.a}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"devices"}},[a("el-row",{staticStyle:{margin:"0",padding:"20px"},attrs:{gutter:20}},[a("el-col",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"pointer",nativeOn:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("btns.back")))]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.$t("dialog.deviceList")))])],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline tr mt-20",attrs:{inline:!0,size:"small",model:e.formInline}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("table.pleaseEnter")+e.$t("table.projectName")},model:{value:e.formInline.projectCode,callback:function(t){e.$set(e.formInline,"projectCode",t)},expression:"formInline.projectCode"}},e._l(e.projectNames,function(e){return a("el-option",{key:e.projectCode,attrs:{label:e.projectName,value:e.projectCode}})}),1)],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("placeholder.enterDeviceNo")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.mac,callback:function(t){e.$set(e.formInline,"mac",t)},expression:"formInline.mac"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("table.pleaseEnter")+e.$t("dialog.deviceAlias")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.aliasName,callback:function(t){e.$set(e.formInline,"aliasName",t)},expression:"formInline.aliasName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("placeholder.enterPosition")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.addr,callback:function(t){e.$set(e.formInline,"addr",t)},expression:"formInline.addr"}})],1),e._v(" "),a("el-form-item",[a("el-select",{style:{width:"130px"},attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:e.$t("dialog.equipmentStatus")},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.stats,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("btns.query")))])],1),e._v(" "),a("el-form-item",[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("el-button",[e._v("\n              "+e._s(e.$t("home.export"))+"\n              "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"current"}},[e._v(e._s(e.$t("btns.exportCurrent")))]),e._v(" "),a("el-dropdown-item",{attrs:{command:"all"}},[e._v(e._s(e.$t("btns.exportAll")))]),e._v(" "),a("el-dropdown-item",{attrs:{command:"electric"}},[e._v(e._s(e.$t("home.export")+e.$t("home.DevicelectricStatistical")))])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"c-default",staticStyle:{"font-size":"14px"},attrs:{type:"text"},on:{click:function(t){return e.toChannelList()}}},[e._v(e._s(e.$t("dialog.channelList")))])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)","element-loading-text":e.$t("message.loading")}},[a("el-table",{attrs:{data:e.devicesData}},[a("el-table-column",{attrs:{property:"mac",label:e.$t("dialog.deviceNo"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"pointer",on:{click:function(a){return e.handleSwitch(t.row)}}},[e._v(e._s(t.row.mac))]),e._v(" "),a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.projectName"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"pointer",on:{click:function(a){return e.handleSwitch(t.row,"project")}}},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"projectAddress",label:e.$t("table.position"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.status"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:-1===t.row.stats,expression:"scope.row.stats === -1"}],staticClass:"c-info"},[e._v(e._s(e.$t("table.offLine")))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.row.stats,expression:"scope.row.stats === 0"}],staticClass:"c-danger"},[e._v(e._s(e.$t("control.offline")))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t.row.stats,expression:"scope.row.stats === 1"}],staticClass:"c-success"},[e._v(e._s(e.$t("table.online")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"offlineTime",label:e.$t("control.offline")+e.$t("dialog.time"),align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{property:"linkman",label:e.$t("table.contact"),align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"linktel",label:e.$t("table.contactNumber"),align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.inspection"),align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"fs-14",attrs:{type:"text"},on:{click:function(a){return e.handleInspection(t.row)}}},[e._v(e._s(e.$t("table.conductPatrolInspection")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("table.inspection")+e.$t("control.recording"),align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"fs-14",attrs:{type:"text"},on:{click:function(a){return e.handleViewInspection(t.row)}}},[e._v(e._s(e.$t("btns.view")))])]}}])})],1),e._v(" "),a("div",{staticClass:"block tc mt-10"},[a("el-pagination",{attrs:{background:"",small:"","current-page":e.currentPage,"page-sizes":[20,50,100,500],"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.devicesTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.titleFlag?e.$t("control.device")+e.$t("table.inspection"):e.$t("control.device")+e.$t("table.inspection")+e.$t("control.recording"),"close-on-click-modal":!1,modal:!1,width:"1000px",top:"20vh",visible:e.inspectionFlag,"before-close":e.handleInspectionClose},on:{"update:visible":function(t){e.inspectionFlag=t}}},[a("div",{staticStyle:{margin:"10px 20px"}},[e.inspectionFlag?a("InspectionDevice",{ref:"inspection",attrs:{inspectionData:e.inspectionData,titleFlag:e.titleFlag},on:{handleInspectionClose:e.handleInspectionClose}}):e._e()],1),e._v(" "),e.titleFlag?a("div",{staticClass:"tc",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleInspectionClose}},[e._v(e._s(e.$t("btns.cancel2")))]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitInformation}},[e._v(e._s(e.$t("btns.ok2")))])],1):e._e()]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("home.DevicelectricStatistical")+e.$t("home.StatisticsTable")+e.$t("home.export"),"close-on-click-modal":!1,visible:e.exportRangeFlags,"custom-class":"export-range"},on:{"update:visible":function(t){e.exportRangeFlags=t},closed:e.handleCloseRange}},[a("el-form",{ref:"rangeExportForm",attrs:{inline:!0,model:e.rangeExportForm,"label-width":"40px"}},[a("el-form-item",[a("el-button",{attrs:{type:e.buttonColor,circle:""},on:{click:e.getMonthValue}},[e._v("月")]),e._v(" "),a("el-button",{attrs:{type:e.yearColor,circle:""},on:{click:e.getYearValue}},[e._v("年")])],1),e._v(" "),e.dateValue?e._e():a("el-form-item",{attrs:{label:e.$t("dialog.time")+e.$t("dialog.range")}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.valueYear,callback:function(t){e.valueYear=t},expression:"valueYear"}})],1),e._v(" "),e.dateValue?a("el-form-item",{attrs:{label:e.$t("dialog.time")+e.$t("dialog.range")}},[a("el-date-picker",{attrs:{"value-format":"yyyyMM",type:"month",placeholder:"选择月"},model:{value:e.valueMonth,callback:function(t){e.valueMonth=t},expression:"valueMonth"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.handleExportRange}},[e._v(e._s(e.$t("home.export")))])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("9q6v")},"data-v-cd260f9a",null);t.default=r.exports}});