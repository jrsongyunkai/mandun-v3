webpackJsonp([6],{"6JAQ":function(e,t,a){var n=a("Icdr"),i=a("/gxq"),r=a("Pdtn"),o=a("vXqC").isNameSpecified,s=a("FIAY").legend.selector,l={all:{type:"all",title:i.clone(s.all)},inverse:{type:"inverse",title:i.clone(s.inverse)}},c=n.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,a){this.mergeDefaultAndTheme(e,a),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){c.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),i.isArray(t)&&i.each(t,function(e,a){i.isString(e)&&(e={type:e}),t[a]=i.merge(e,l[e.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,a=0;a<e.length;a++){var n=e[a].get("name");if(this.isSelected(n)){this.select(n),t=!0;break}}!t&&this.select(e[0].get("name"))}},_updateData:function(e){var t=[],a=[];e.eachRawSeries(function(n){var i,r=n.name;if(a.push(r),n.legendVisualProvider){var s=n.legendVisualProvider.getAllNames();e.isSeriesFiltered(n)||(a=a.concat(s)),s.length?t=t.concat(s):i=!0}else i=!0;i&&o(n)&&t.push(n.name)}),this._availableNames=a;var n=this.get("data")||t,s=i.map(n,function(e){return"string"!=typeof e&&"number"!=typeof e||(e={name:e}),new r(e,this,this.ecModel)},this);this._data=s},getData:function(){return this._data},select:function(e){var t=this.option.selected;if("single"===this.get("selectedMode")){var a=this._data;i.each(a,function(e){t[e.get("name")]=!1})}t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var e=this._data,t=this.option.selected;i.each(e,function(e){t[e.get("name",!0)]=!0})},inverseSelect:function(){var e=this._data,t=this.option.selected;i.each(e,function(e){var a=e.get("name",!0);t.hasOwnProperty(a)||(t[a]=!0),t[a]=!t[a]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&i.indexOf(this._availableNames,e)>=0},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),d=c;e.exports=d},"6f6q":function(e,t,a){var n=a("Icdr"),i=a("/gxq");function r(e,t,a){var n,r={},o="toggleSelected"===e;return a.eachComponent("legend",function(a){o&&null!=n?a[n?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?a[e]():(a[e](t.name),n=a.isSelected(t.name));var s=a.getData();i.each(s,function(e){var t=e.get("name");if("\n"!==t&&""!==t){var n=a.isSelected(t);r.hasOwnProperty(t)?r[t]=r[t]&&n:r[t]=n}})}),"allSelect"===e||"inverseSelect"===e?{selected:r}:{name:t.name,selected:r}}n.registerAction("legendToggleSelect","legendselectchanged",i.curry(r,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",i.curry(r,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",i.curry(r,"inverseSelect")),n.registerAction("legendSelect","legendselected",i.curry(r,"select")),n.registerAction("legendUnSelect","legendunselected",i.curry(r,"unSelect"))},"80cc":function(e,t,a){var n=a("Icdr");a("6JAQ"),a("6f6q"),a("8RN9");var i=a("JIsR"),r=a("Y5nL");n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,i),r.registerSubTypeDefaulter("legend",function(){return"plain"})},"8RN9":function(e,t,a){a("4Nz2").__DEV__;var n=a("Icdr"),i=a("/gxq"),r=a("kK7q").createSymbol,o=a("0sHC"),s=a("v/cD").makeBackground,l=a("1Xuh"),c=i.curry,d=i.each,h=o.Group,u=n.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new h),this._backgroundEl,this.group.add(this._selectorGroup=new h),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,a){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var r=e.get("align"),o=e.get("orient");r&&"auto"!==r||(r="right"===e.get("left")&&"vertical"===o?"right":"left");var c=e.get("selector",!0),d=e.get("selectorPosition",!0);!c||d&&"auto"!==d||(d="horizontal"===o?"end":"start"),this.renderInner(r,e,t,a,c,o,d);var h=e.getBoxLayoutParams(),u={width:a.getWidth(),height:a.getHeight()},p=e.get("padding"),g=l.getLayoutRect(h,u,p),m=this.layoutInner(e,r,g,n,c,d),f=l.getLayoutRect(i.defaults({width:m.width,height:m.height},h),u,p);this.group.attr("position",[f.x-m.x,f.y-m.y]),this.group.add(this._backgroundEl=s(m,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,a,n,r,o,s){var l=this.getContentGroup(),u=i.createHashMap(),p=t.get("selectedMode"),y=[];a.eachRawSeries(function(e){!e.get("legendHoverLink")&&y.push(e.id)}),d(t.getData(),function(i,r){var o=i.get("name");if(this.newlineDisabled||""!==o&&"\n"!==o){var s=a.getSeriesByName(o)[0];if(!u.get(o))if(s){var d=s.getData(),v=d.getVisual("color"),C=d.getVisual("borderColor");"function"==typeof v&&(v=v(s.getDataParams(0))),"function"==typeof C&&(C=C(s.getDataParams(0)));var x=d.getVisual("legendSymbol")||"roundRect",w=d.getVisual("symbol");this._createItem(o,r,i,t,x,w,e,v,C,p).on("click",c(g,o,null,n,y)).on("mouseover",c(m,s.name,null,n,y)).on("mouseout",c(f,s.name,null,n,y)),u.set(o,!0)}else a.eachRawSeries(function(a){if(!u.get(o)&&a.legendVisualProvider){var s=a.legendVisualProvider;if(!s.containName(o))return;var l=s.indexOfName(o),d=s.getItemVisual(l,"color"),h=s.getItemVisual(l,"borderColor");this._createItem(o,r,i,t,"roundRect",null,e,d,h,p).on("click",c(g,null,o,n,y)).on("mouseover",c(m,null,o,n,y)).on("mouseout",c(f,null,o,n,y)),u.set(o,!0)}},this)}else l.add(new h({newline:!0}))},this),r&&this._createSelector(r,t,n,o,s)},_createSelector:function(e,t,a,n,i){var r=this.getSelectorGroup();d(e,function(e){!function(e){var n=e.type,i=new o.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:"all"===n?"legendAllSelect":"legendInverseSelect"})}});r.add(i);var s=t.getModel("selectorLabel"),l=t.getModel("emphasis.selectorLabel");o.setLabelStyle(i.style,i.hoverStyle={},s,l,{defaultText:e.title,isRectText:!1}),o.setHoverStyle(i)}(e)})},_createItem:function(e,t,a,n,s,l,c,d,u,g){var m=n.get("itemWidth"),f=n.get("itemHeight"),y=n.get("inactiveColor"),v=n.get("inactiveBorderColor"),C=n.get("symbolKeepAspect"),x=n.getModel("itemStyle"),w=n.isSelected(e),_=new h,S=a.getModel("textStyle"),I=a.get("icon"),b=a.getModel("tooltip"),A=b.parentModel,P=r(s=I||s,0,0,m,f,w?d:y,null==C||C);if(_.add(p(P,s,x,u,v,w)),!I&&l&&(l!==s||"none"===l)){var D=.8*f;"none"===l&&(l="circle");var O=r(l,(m-D)/2,(f-D)/2,D,D,w?d:y,null==C||C);_.add(p(O,l,x,u,v,w))}var $="left"===c?m+5:-5,T=c,F=n.get("formatter"),G=e;"string"==typeof F&&F?G=F.replace("{name}",null!=e?e:""):"function"==typeof F&&(G=F(e)),_.add(new o.Text({style:o.setTextStyle({},S,{text:G,x:$,y:f/2,textFill:w?S.getTextColor():y,textAlign:T,textVerticalAlign:"middle"})}));var L=new o.Rect({shape:_.getBoundingRect(),invisible:!0,tooltip:b.get("show")?i.extend({content:e,formatter:A.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:n.componentIndex,name:e,$vars:["name"]}},b.option):null});return _.add(L),_.eachChild(function(e){e.silent=!0}),L.silent=!g,this.getContentGroup().add(_),o.setHoverStyle(_),_.__legendDataIndex=t,_},layoutInner:function(e,t,a,n,i,r){var o=this.getContentGroup(),s=this.getSelectorGroup();l.box(e.get("orient"),o,e.get("itemGap"),a.width,a.height);var c=o.getBoundingRect(),d=[-c.x,-c.y];if(i){l.box("horizontal",s,e.get("selectorItemGap",!0));var h=s.getBoundingRect(),u=[-h.x,-h.y],p=e.get("selectorButtonGap",!0),g=e.getOrient().index,m=0===g?"width":"height",f=0===g?"height":"width",y=0===g?"y":"x";"end"===r?u[g]+=c[m]+p:d[g]+=h[m]+p,u[1-g]+=c[f]/2-h[f]/2,s.attr("position",u),o.attr("position",d);var v={x:0,y:0};return v[m]=c[m]+p+h[m],v[f]=Math.max(c[f],h[f]),v[y]=Math.min(0,h[y]+u[1-g]),v}return o.attr("position",d),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function p(e,t,a,n,i,r){var o;return"line"!==t&&t.indexOf("empty")<0?(o=a.getItemStyle(),e.style.stroke=n,r||(o.stroke=i)):o=a.getItemStyle(["borderWidth","borderColor"]),e.setStyle(o)}function g(e,t,a,n){f(e,t,a,n),a.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),m(e,t,a,n)}function m(e,t,a,n){var i=a.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||a.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function f(e,t,a,n){var i=a.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||a.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}e.exports=u},JIsR:function(e,t){e.exports=function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(e){for(var a=0;a<t.length;a++)if(!t[a].isSelected(e.name))return!1;return!0})}},"N53/":function(e,t){},P7ry:function(e,t,a){a("80cc"),a("dp0Z"),a("wLWv"),a("R0U9")},R0U9:function(e,t,a){a("Icdr").registerAction("legendScroll","legendscroll",function(e,t){var a=e.scrollDataIndex;null!=a&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(a)})})},ZFmr:function(e,t){},dp0Z:function(e,t,a){var n=a("6JAQ"),i=a("1Xuh"),r=i.mergeLayoutParam,o=i.getLayoutParams,s=n.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,a,n){var i=o(e);s.superCall(this,"init",e,t,a,n),l(this,e,i)},mergeOption:function(e,t){s.superCall(this,"mergeOption",e,t),l(this,this.option,e)}});function l(e,t,a){var n=[1,1];n[e.getOrient().index]=0,r(t,a,{type:"box",ignoreSize:n})}var c=s;e.exports=c},gMkE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IcnI"),i=a("P9l9"),r=a("gApy"),o=a.n(r),s=a("Icdr"),l=a.n(s),c=(a("87tG"),a("Oq2I"),a("miEh"),{name:"gauge-chart",props:{title:String,axisColor:{type:Array,default:function(){return[[.2,"#f8605f"],[.8,"#fadc62"],[1,"#749f83"]]}},options:{type:Array,default:function(){return[]}}},data:function(){return{echart:"",uniqueID:"",baseStyle:{height:this.$store.state.heightThird}}},created:function(){this.uniqueID=o()()},mounted:function(){this.init()},methods:{init:function(){var e={tooltip:{formatter:"{b} : {c}"},series:[{type:"gauge",max:this.options.length>0?this.options[0].gaugeMax:100,name:"",title:{offsetCenter:[0,"85%"],color:"#fff",fontSize:12},startAngle:"210",endAngle:"-30",pointer:{width:2},axisLine:{lineStyle:{color:this.axisColor,width:4,shadowColor:"#fff",shadowBlur:2}},splitLine:{show:!0,length:10,lineStyle:{color:"#172450"}},axisTick:{length:5,lineStyle:{color:"#172450"}},axisLabel:{show:!1},radius:"100%",detail:{offsetCenter:[0,"40%"],padding:20,fontSize:13,color:"rgb(255,255,255)",formatter:"{value}"},data:this.options}]},t=l.a.init(document.getElementById(this.uniqueID));this.echart=t,t.clear(),t.setOption(e),window.addEventListener("resize",function(){t.resize()})}},watch:{options:{handler:function(e,t){e&&(this.options=e,this.init())},deep:!0},"$store.state.heightThird":{handler:function(e,t){e&&(this.baseStyle.height=e)}}}}),d={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"gauge",style:this.baseStyle,attrs:{id:this.uniqueID}})},staticRenderFns:[]};var h=a("VU/8")(c,d,!1,function(e){a("o+a8")},"data-v-91b4ad38",null).exports,u=(a("Vb+l"),a("P7ry"),{name:"nest-pie-chart",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{echart:"",uniqueID:"",legendLeft:"70%",baseStyle:{height:this.$store.state.heightOne+"px"}}},created:function(){this.uniqueID=o()()},mounted:function(){this.init()},methods:{init:function(){var e=this,t=this.$i18n.locale,a=this.options.series.length>0?this.options.series[0].data.length:0;"en"===t?this.legendLeft=a<8?"45%":"55%":document.documentElement.clientWidth>1366?this.legendLeft="45%":this.legendLeft="55%";var n={tooltip:{trigger:"item",formatter:"{b}"},legend:{type:"scroll",orient:"vertical",align:"left",top:"7%",left:this.legendLeft,icon:"circle",itemHeight:"10",textStyle:{color:"#fff"},data:this.options.legend.data},color:["#f47920","#2a5caa","#7fb80e","#d71345","#ffc20e","#33a3dc","#ffe600","#45b97c","#f3715c","#0000FF","#2E64FE","#00FF80","#FE9A2E"],series:this.options.series},i=l.a.init(document.getElementById(this.uniqueID));this.echart=i,window.addEventListener("resize",function(){document.getElementById(e.uniqueID)&&(document.getElementById(e.uniqueID).style.width=.2083333*window.innerWidth-22+"px"),i.resize()}),i.clear(),i.setOption(n,!0),i.off("legendselectchanged"),i.on("legendselectchanged",function(t){e.options.series[0].data.forEach(function(a,n){a.name===t.name&&(3===a.tno?e.handleQuantity(a.tno+",4"):17===a.tno?e.handleQuantity(a.tno+",18,19"):e.handleQuantity(a.tno),i.dispatchAction({type:"legendSelect",name:t.name}))})})},handleQuantity:function(e){this.$router.push({name:"Alarms",params:{projectCode:this.$store.state.projectCode,typeNumber:e.toString(),status:"",oqp2:"/Home"===this.$route.path?2:""}})}},watch:{options:{handler:function(e,t){e&&(this.options.series=e.series,this.init())},deep:!0},"$store.state.heightOne":{handler:function(e,t){e&&(this.baseStyle.height=e+"px")}}}}),p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"nest-pie",style:this.baseStyle,attrs:{id:this.uniqueID}})])},staticRenderFns:[]};var g=a("VU/8")(u,p,!1,function(e){a("N53/")},"data-v-17857d4c",null).exports,m=(a("4UDB"),{name:"line-area-chart",props:{title:String,refreshFlag:Boolean,lineAreaChartFlag:Boolean,options:{type:Object,default:function(){return{}}}},data:function(){return{echart:"",uniqueID:"",baseStyle:{height:this.$store.state.heightOne+"px"}}},created:function(){this.uniqueID=o()()},mounted:function(){this.init()},methods:{init:function(){var e=this,t={tooltip:{trigger:"axis"},title:{show:this.options.title.show,text:this.options.title.text?this.options.title.text:"",textStyle:{color:"#fff",fontSize:14},left:0,top:10},legend:{orient:"vertical",align:"left",top:10,x:"right",icon:"circle",textStyle:{color:"#fff"}},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#fff"}},data:this.options.xAxis},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}},splitLine:{show:!1}},grid:{left:50,top:"20%",bottom:"20%"},series:this.options.series},a=l.a.init(document.getElementById(this.uniqueID));this.echart=a,a.clear(),a.setOption(t),window.addEventListener("resize",function(){document.getElementById(e.uniqueID)&&(document.getElementById(e.uniqueID).style.width=.2083333*window.innerWidth-22+"px"),a.resize()})}},watch:{options:{handler:function(e,t){e?(this.options=e,this.init()):(this.options=t,this.init())},deep:!0},"$store.state.heightOne":{handler:function(e,t){e&&(this.baseStyle.height=e+"px")}},"$store.state.systemFlag":{handler:function(e,t){e&&""!==this.$store.state.toPath&&this.echart.resize()}},"$store.state.toPath":{handler:function(e,t){document.getElementById(this.uniqueID).style.width=.2083333*window.innerWidth-22+"px",e&&this.echart.resize()}}}}),f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"line-area",style:this.baseStyle,attrs:{id:this.uniqueID}})])},staticRenderFns:[]};var y={data:function(){return{provinceId:"",cityId:"",countyId:"",todayAlarmOptions:[],yesterdayAlarmOptions:[],todayWarnOptions:[],yesterdayWarnOptions:[],classifiedAlarm:!1,alarmProportion:"",alarmColor:[[.2,"#00ffaa"],[.8,"#ffa42c"],[1,"#ff3939"]],earlyWarnColor:[[.2,"#00ffaa"],[.8,"#7f7f7f"],[1,"#ff3939"]],alarmUp:!1,alarmDown:!1,warnUp:!1,warnDown:!1,compareStyle:{height:this.$store.state.heightThird,lineHeight:this.$store.state.heightThird},activePie:"first",typeAlarmTypes:{legend:[],series:[]},typeAlarmTypes2:{legend:[],series:[]},trendOptions:{title:{show:!1},xAxis:[],series:[]},baseStyle:{height:this.$store.state.heightThird},nestPieChartStyle:{height:this.$store.state.heightOne+"px"},gaugeChartFlag:!1,nestPieChartFlag:!1,lineAreaChartFlag:!1}},mounted:function(){this.init()},methods:{init:function(){var e=this;setTimeout(function(){e.initClassifiedAlarm()},2e3*Math.random()),setTimeout(function(){e.initDistribution()},2e3*Math.random()),setTimeout(function(){e.initAlarmTrend()},2e3*Math.random())},initClassifiedAlarm:function(){this.gaugeChartFlag=!1,this.todayAlarmOptions=[],this.yesterdayAlarmOptions=[],this.todayWarnOptions=[],this.yesterdayWarnOptions=[];var e={oqp1:"",projectCode:this.$store.state.projectCode,typeNumbers:"1,2,3,4,5,6,7,8,11,17",provinceId:this.provinceId,cityId:this.cityId,countyId:this.countyId};this.$nextTick(function(){var t=this;e.oqp1=2,Object(i.A)(e).then(function(e){if(n.a.commit("l2dCompare",e),e.success){t.todayAlarmOptions.push({value:e.data.l2dCompare.alarm[0],name:t.$t("home.todayAlarm"),gaugeMax:100}),t.yesterdayAlarmOptions.push({value:e.data.l2dCompare.alarm[1],name:t.$t("home.yesterdayAlarm"),gaugeMax:100}),t.todayWarnOptions.push({value:e.data.l2dCompare.warn[0],name:t.$t("home.todayWarning"),gaugeMax:100}),t.yesterdayWarnOptions.push({value:e.data.l2dCompare.warn[1],name:t.$t("home.yesterdayWarning"),gaugeMax:100}),e.data.l2dCompare.alarm[0]+e.data.l2dCompare.alarm[1]>0?(e.data.l2dCompare.alarm[0]-e.data.l2dCompare.alarm[1]>0?(t.alarmUp=!0,t.alarmDown=!1):e.data.l2dCompare.alarm[0]-e.data.l2dCompare.alarm[1]<0&&(t.alarmDown=!0,t.alarmUp=!1),0!==e.data.l2dCompare.alarm[1]?t.alarmProportion=Math.floor(Math.abs(e.data.l2dCompare.alarm[0]-e.data.l2dCompare.alarm[1])/e.data.l2dCompare.alarm[1]*1e4)/100+"%":t.alarmProportion="100%"):(t.alarmUp=!1,t.alarmDown=!1,t.alarmProportion="0%"),e.data.l2dCompare.warn[0]+e.data.l2dCompare.warn[1]>0?(e.data.l2dCompare.warn[0]-e.data.l2dCompare.warn[1]>0?(t.warnUp=!0,t.warnDown=!1):e.data.l2dCompare.warn[0]-e.data.l2dCompare.warn[1]<0&&(t.warnDown=!0,t.warnUp=!1),0!==e.data.l2dCompare.warn[1]?t.warnProportion=Math.floor(Math.abs(e.data.l2dCompare.warn[0]-e.data.l2dCompare.warn[1])/e.data.l2dCompare.warn[1]*1e4)/100+"%":t.warnProportion="100%"):(t.warnUp=!1,t.warnDown=!1,t.warnProportion="0%");var a=0,i=0;e.data.l2dCompare.alarm[0]+e.data.l2dCompare.alarm[1]>0&&(a=e.data.l2dCompare.alarm[0]-e.data.l2dCompare.alarm[1]>0?e.data.l2dCompare.alarm[0]*t.$store.state.gaugeMax:e.data.l2dCompare.alarm[1]*t.$store.state.gaugeMax)>100&&(t.todayAlarmOptions[0].gaugeMax=a,t.yesterdayAlarmOptions[0].gaugeMax=a),e.data.l2dCompare.warn[0]+e.data.l2dCompare.warn[1]>0&&(i=e.data.l2dCompare.warn[0]-e.data.l2dCompare.warn[1]>0?e.data.l2dCompare.warn[0]*t.$store.state.gaugeMax:e.data.l2dCompare.warn[1]*t.$store.state.gaugeMax)>100&&(t.todayWarnOptions[0].gaugeMax=i,t.yesterdayWarnOptions[0].gaugeMax=i),t.gaugeChartFlag=!0,t.classifiedAlarm=!0}else t.alarmUp=t.alarmDown=t.warnUp=t.warnDown=!1,t.todayAlarmOptions=[],t.yesterdayAlarmOptions=[],t.todayWarnOptions=[],t.yesterdayWarnOptions=[],t.alarmProportionNumber=0,t.alarmProportion="0%",t.warnProportionNumber=0,t.warnProportion="0%"}).catch(function(e){e&&t.$message({message:t.$t("message.unknown"),type:"error"})}).finally(function(){})})},initDistribution:function(){this.nestPieChartFlag=!1;var e={oqp1:"",projectCode:this.$store.state.projectCode,typeNumbers:"1,2,3,4,5,6,7,8,11,17",dateType:this.$store.state.distribution.dateType,date:this.$store.state.distribution.date,provinceId:this.provinceId,cityId:this.cityId,countyId:this.countyId};this.typeAlarmTypes.series=[],this.typeAlarmTypes2.series=[],this.$nextTick(function(){var t=this;e.oqp1=4,Object(i.A)(e).then(function(e){if(n.a.commit("ratioOfAlert",e),e.success){var a=[],i=[];e.data.ratioOfAlert.forEach(function(e,t){-1!==[1,2,3,4,5,6,7,8,11,17,18,19,53,54,56,57,62,63,1001,1002,1005,1007,1008,1009,1010,2002,2006,2003,2004,9e3,9001].indexOf(e.typeNumber)?a.push({name:e.info,value:e.number,tno:e.typeNumber}):-1!==[9,10,12,13,14,15,16,55,58,1003,1004,1006].indexOf(e.typeNumber)&&i.push({name:e.info,value:e.number,tno:e.typeNumber})});var r=t.legendData(a),o=t.legendData(i);t.typeAlarmTypes.series.push({type:"pie",data:a,radius:["30%","50%"],center:[("en"===t.$i18n.locale||t.$store.state.toPath,"25%"),"50%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"en"===t.$i18n.locale?"12":"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1}}}),t.typeAlarmTypes2.series.push({type:"pie",data:i,radius:["30%","50%"],center:[("en"===t.$i18n.locale||t.$store.state.toPath,"25%"),"50%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"en"===t.$i18n.locale?"12":"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1}}}),t.typeAlarmTypes.legend.data=r,t.typeAlarmTypes2.legend.data=o}else t.typeAlarmTypes.series=[],t.typeAlarmTypes2.series=[];t.nestPieChartFlag=!0}).catch(function(e){e&&t.$message({message:t.$t("message.unknown"),type:"error"})})})},initAlarmTrend:function(){this.lineAreaChartFlag=!1;var e={projectCode:this.$store.state.projectCode,provinceId:this.provinceId,cityId:this.cityId,countyId:this.countyId};this.$nextTick(function(){var t=this;Object(i._102)(e).then(function(e){if(e.success){var a=void 0;a=window.innerHeight<969?969:window.innerHeight,n.a.commit("heightOne",(a-309)/3),t.trendOptions.xAxis=[],t.trendOptions.series=[],t.trendOptions.xAxis=e.data.xAxis,t.trendOptions.series.push({name:t.$t("home.alarm"),type:"line",data:e.data.alarm,itemStyle:{color:"#F80759"},showSymbol:!0,symbol:"circle",symbolSize:4,smooth:!0},{name:t.$t("home.warning"),type:"line",data:e.data.warn,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#6FB1FC"},{offset:1,color:"#0052D4"}],global:!1}},itemStyle:{color:"#34ACE7"},showSymbol:!0,symbol:"emptyCircle",symbolSize:4,smooth:!0}),t.lineAreaChartFlag=!0}else"-1"===e.code||(t.trendOptions.xAxis=[],t.trendOptions.series=[],t.$message({message:e.message,type:"error"}))}).catch(function(e){e&&t.$message({message:t.$t("message.unknown"),type:"error"})})})},legendData:function(e){var t=0,a=[];return e.forEach(function(e,n){a[n]=e.name+" "+e.value+" ",t+=e.value}),a.forEach(function(n,i){document.documentElement.clientWidth>1366?a[i]=n+"("+(0===t?0:(e[i].value/t*100).toFixed(2))+"%)":a[i]=n.split(" ")[0],e[i].name=a[i]}),a}},watch:{"$store.state.projectCode":{handler:function(e,t){(e||""===e)&&this.init()}},"$store.state.location":{handler:function(e,t){e&&(this.provinceId=e[0],this.cityId=e[1],this.countyId=e[2],this.init())}},"$store.state.heightThird":{handler:function(e,t){e&&(this.compareStyle.height=this.compareStyle.lineHeight=e)}}},components:{GaugeChart:h,NestPieChart:g,LineAreaChart:a("VU/8")(m,f,!1,function(e){a("ZFmr")},"data-v-40a45189",null).exports}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{attrs:{md:24}},[a("el-col",{staticClass:"boundary left-padding-right",attrs:{md:24}},[a("el-row",{staticClass:"chart-title"},[a("el-col",{staticClass:"el-padding-left-20",attrs:{md:23,xs:23,sm:23}},[e._v(e._s(e.$t("home.theLast2DaysOfAlarmSituation")))]),e._v(" "),a("el-col",{attrs:{md:1,xs:1,sm:1}},[a("i",{staticClass:"el-icon-refresh refresh",on:{click:e.initClassifiedAlarm}})])],1),e._v(" "),a("el-col",{staticClass:"el-margin",attrs:{md:8}},[e.gaugeChartFlag?e._e():a("div",{staticClass:"loading",style:e.baseStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),e.classifiedAlarm&&e.gaugeChartFlag?a("gauge-chart",{attrs:{options:e.todayAlarmOptions,axisColor:e.alarmColor}}):e._e()],1),e._v(" "),a("el-col",{staticClass:"el-margin",attrs:{md:8}},[e.gaugeChartFlag?e._e():a("div",{staticClass:"loading",style:e.baseStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),e.classifiedAlarm&&e.gaugeChartFlag?a("gauge-chart",{attrs:{options:e.yesterdayAlarmOptions,axisColor:e.alarmColor}}):e._e()],1),e._v(" "),a("el-col",{staticClass:"compare el-margin",style:e.compareStyle,attrs:{md:8}},[a("el-col",{staticClass:"compare-percent",class:""!==e.$store.state.toPath?"compare-percent-other":"",style:e.compareStyle,attrs:{span:18}},[e._v(e._s(e.alarmProportion))]),e._v(" "),a("el-col",{staticClass:"compare-icon",class:""!==e.$store.state.toPath?"compare-icon-other":"",style:e.compareStyle,attrs:{span:6}},[e.alarmUp?a("i",{key:e.key,staticClass:"iconfont icon-web-icon-1",attrs:{alt:"increase"}}):e._e(),e._v(" "),e.alarmDown?a("i",{key:e.key,staticClass:"iconfont icon-web-icon-",attrs:{alt:"reduce"}}):e._e(),e._v(" "),e.alarmUp||e.alarmDown?e._e():a("span",{key:e.key},[e._v("-")])]),e._v(" "),a("div",{staticClass:"compare-msg"},[e._v(e._s(e.$t("home.YearOnYear")))])],1),e._v(" "),a("el-col",{staticClass:"el-margin",attrs:{md:8}},[e.gaugeChartFlag?e._e():a("div",{staticClass:"loading",style:e.baseStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),e.classifiedAlarm&&e.gaugeChartFlag?a("gauge-chart",{attrs:{options:e.todayWarnOptions,axisColor:e.earlyWarnColor}}):e._e()],1),e._v(" "),a("el-col",{staticClass:"el-margin",attrs:{md:8}},[e.gaugeChartFlag?e._e():a("div",{staticClass:"loading",style:e.baseStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),e.classifiedAlarm&&e.gaugeChartFlag?a("gauge-chart",{attrs:{options:e.yesterdayWarnOptions,axisColor:e.earlyWarnColor}}):e._e()],1),e._v(" "),a("el-col",{staticClass:"compare el-margin",style:e.compareStyle,attrs:{md:8}},[a("el-col",{staticClass:"compare-percent",class:""!==e.$store.state.toPath?"compare-percent-other":"",style:e.compareStyle,attrs:{span:18}},[e._v(e._s(e.warnProportion))]),e._v(" "),a("el-col",{staticClass:"compare-icon",class:""!==e.$store.state.toPath?"compare-icon-other":"",style:e.compareStyle,attrs:{span:6}},[e.warnUp?a("i",{staticClass:"iconfont icon-web-icon-1",attrs:{alt:"increase"}}):e._e(),e._v(" "),e.warnDown?a("i",{staticClass:"iconfont icon-web-icon-",attrs:{alt:"reduce"}}):e._e(),e._v(" "),e.warnUp||e.warnDown?e._e():a("span",[e._v("-")])]),e._v(" "),a("div",{staticClass:"compare-msg"},[e._v(e._s(e.$t("home.YearOnYear")))])],1)],1),e._v(" "),a("el-col",{staticClass:"type-distribution alarmTypeDistribution",attrs:{md:24}},[a("div",{staticStyle:{position:"relative"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activePie,callback:function(t){e.activePie=t},expression:"activePie"}},[a("el-tab-pane",{attrs:{label:"/Home"===e.$store.state.toPath||""===e.$store.state.toPath?this.$t("home.alarmTypeDistribution"):this.$t("home.todayAlarmTypeDistribution"),name:"first"}},[e.nestPieChartFlag?e._e():a("div",{staticClass:"loading boundary",style:e.nestPieChartStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),"first"===e.activePie&&e.nestPieChartFlag?a("nest-pie-chart",{staticClass:"boundary",attrs:{options:e.typeAlarmTypes}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"/Home"===e.$store.state.toPath||""===e.$store.state.toPath?this.$t("home.warningTypeDistribution"):this.$t("home.todayWarningTypeDistribution"),name:"second"}},[e.nestPieChartFlag?e._e():a("div",{staticClass:"loading boundary",style:e.nestPieChartStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),"second"===e.activePie&&e.nestPieChartFlag?a("nest-pie-chart",{staticClass:"boundary",attrs:{options:e.typeAlarmTypes2}}):e._e()],1)],1),e._v(" "),a("i",{staticClass:"el-icon-refresh tab-refresh",on:{click:e.initDistribution}})],1)]),e._v(" "),a("el-col",{staticClass:"boundary mt-20 left-padding-right",attrs:{md:24}},[a("el-row",{staticClass:"chart-title"},[a("el-col",{staticClass:"el-padding-left-20",attrs:{md:23,xs:23,sm:23}},[e._v(e._s(e.$t("home.alarmWarningTrend")))]),e._v(" "),a("el-col",{attrs:{md:1,xs:1,sm:1}},[a("i",{staticClass:"el-icon-refresh refresh",on:{click:e.initAlarmTrend}})])],1),e._v(" "),e.lineAreaChartFlag?e._e():a("div",{staticClass:"loading boundary",style:e.nestPieChartStyle},[a("i",{staticClass:"el-icon-loading"})]),e._v(" "),e.lineAreaChartFlag?a("line-area-chart",{attrs:{options:e.trendOptions}}):e._e()],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(y,v,!1,function(e){a("wtfL")},"data-v-6d67288f",null);t.default=C.exports},"o+a8":function(e,t){},"v/cD":function(e,t,a){var n=a("1Xuh"),i=n.getLayoutRect,r=n.box,o=n.positionElement,s=a("HHfb"),l=a("0sHC");t.layout=function(e,t,a){var n=t.getBoxLayoutParams(),s=t.get("padding"),l={width:a.getWidth(),height:a.getHeight()},c=i(n,l,s);r(t.get("orient"),e,t.get("itemGap"),c.width,c.height),o(e,n,l,s)},t.makeBackground=function(e,t){var a=s.normalizeCssArray(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new l.Rect({shape:{x:e.x-a[3],y:e.y-a[0],width:e.width+a[1]+a[3],height:e.height+a[0]+a[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1})}},wLWv:function(e,t,a){var n=a("/gxq"),i=a("0sHC"),r=a("1Xuh"),o=a("8RN9"),s=i.Group,l=["width","height"],c=["x","y"],d=o.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){d.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new s),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new s),this._showController},resetInner:function(){d.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,a,r,o,s,l){var c=this;d.superCall(this,"renderInner",e,t,a,r,o,s,l);var h=this._controllerGroup,u=t.get("pageIconSize",!0);n.isArray(u)||(u=[u,u]),g("pagePrev",0);var p=t.getModel("pageTextStyle");function g(e,a){var o=e+"DataIndex",s=i.createIcon(t.get("pageIcons",!0)[t.getOrient().name][a],{onclick:n.bind(c._pageGo,c,o,t,r)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});s.name=e,h.add(s)}h.add(new i.Text({name:"pageText",style:{textFill:p.getTextColor(),font:p.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),g("pageNext",1)},layoutInner:function(e,t,a,i,o,s){var d=this.getSelectorGroup(),h=e.getOrient().index,u=l[h],p=c[h],g=l[1-h],m=c[1-h];o&&r.box("horizontal",d,e.get("selectorItemGap",!0));var f=e.get("selectorButtonGap",!0),y=d.getBoundingRect(),v=[-y.x,-y.y],C=n.clone(a);o&&(C[u]=a[u]-y[u]-f);var x=this._layoutContentAndController(e,i,C,h,u,g,m);if(o){if("end"===s)v[h]+=x[u]+f;else{var w=y[u]+f;v[h]-=w,x[p]-=w}x[u]+=y[u]+f,v[1-h]+=x[m]+x[g]/2-y[g]/2,x[g]=Math.max(x[g],y[g]),x[m]=Math.min(x[m],y[m]+v[1-h]),d.attr("position",v)}return x},_layoutContentAndController:function(e,t,a,o,s,l,c){var d=this.getContentGroup(),h=this._containerGroup,u=this._controllerGroup;r.box(e.get("orient"),d,e.get("itemGap"),o?a.width:null,o?null:a.height),r.box("horizontal",u,e.get("pageButtonItemGap",!0));var p=d.getBoundingRect(),g=u.getBoundingRect(),m=this._showController=p[s]>a[s],f=[-p.x,-p.y];t||(f[o]=d.position[o]);var y=[0,0],v=[-g.x,-g.y],C=n.retrieve2(e.get("pageButtonGap",!0),e.get("itemGap",!0));m&&("end"===e.get("pageButtonPosition",!0)?v[o]+=a[s]-g[s]:y[o]+=g[s]+C);v[1-o]+=p[l]/2-g[l]/2,d.attr("position",f),h.attr("position",y),u.attr("position",v);var x={x:0,y:0};if(x[s]=m?a[s]:p[s],x[l]=Math.max(p[l],g[l]),x[c]=Math.min(0,g[c]+v[1-o]),h.__rectSize=a[s],m){var w={x:0,y:0};w[s]=Math.max(a[s]-g[s]-C,0),w[l]=x[l],h.setClipPath(new i.Rect({shape:w})),h.__rectSize=w[s]}else u.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var _=this._getPageInfo(e);return null!=_.pageIndex&&i.updateProps(d,{position:_.contentPosition},!!m&&e),this._updatePageInfoView(e,_),x},_pageGo:function(e,t,a){var n=this._getPageInfo(t)[e];null!=n&&a.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:t.id})},_updatePageInfoView:function(e,t){var a=this._controllerGroup;n.each(["pagePrev","pageNext"],function(n){var i=null!=t[n+"DataIndex"],r=a.childOfName(n);r&&(r.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),r.cursor=i?"pointer":"default")});var i=a.childOfName("pageText"),r=e.get("pageFormatter"),o=t.pageIndex,s=null!=o?o+1:0,l=t.pageCount;i&&r&&i.setStyle("text",n.isString(r)?r.replace("{current}",s).replace("{total}",l):r({current:s,total:l}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),a=this.getContentGroup(),n=this._containerGroup.__rectSize,i=e.getOrient().index,r=l[i],o=c[i],s=this._findTargetItemIndex(t),d=a.children(),h=d[s],u=d.length,p=u?1:0,g={contentPosition:a.position.slice(),pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return g;var m=x(h);g.contentPosition[i]=-m.s;for(var f=s+1,y=m,v=m,C=null;f<=u;++f)(!(C=x(d[f]))&&v.e>y.s+n||C&&!w(C,y.s))&&(y=v.i>y.i?v:C)&&(null==g.pageNextDataIndex&&(g.pageNextDataIndex=y.i),++g.pageCount),v=C;for(f=s-1,y=m,v=m,C=null;f>=-1;--f)(C=x(d[f]))&&w(v,C.s)||!(y.i<v.i)||(v=y,null==g.pagePrevDataIndex&&(g.pagePrevDataIndex=y.i),++g.pageCount,++g.pageIndex),y=C;return g;function x(e){if(e){var t=e.getBoundingRect(),a=t[o]+e.position[i];return{s:a,e:a+t[r],i:e.__legendDataIndex}}}function w(e,t){return e.e>=t&&e.s<=t+n}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(n,i){var r=n.__legendDataIndex;null==a&&null!=r&&(a=i),r===e&&(t=i)}),null!=t?t:a):0;var t,a}}),h=d;e.exports=h},wtfL:function(e,t){}});